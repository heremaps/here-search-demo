stages:
  - test
  - build

coverage:
  stage: test
  image: "hcr.data.here.com/public_mirror/python:3.8-slim"
  script:
    - pip install -e .
    - pip install -r requirements_dev.txt
    - coverage run --source src -m pytest
    - coverage report -m
  coverage: '/TOTAL\s+\d+\s+\d+\s+(\d+%)/'
  #when: manual

test38:
  stage: test
  image: "hcr.data.here.com/public_mirror/python:3.8-slim"
  script:
    - pip install -e .
    - pip install -r requirements_dev.txt
    - pytest
  #when: manual

test39:
  stage: test
  image: "hcr.data.here.com/public_mirror/python:3.9-slim"
  script:
    - pip install -e .
    - pip install -r requirements_dev.txt
    - pytest
  #when: manual

test310:
  stage: test
  image: "hcr.data.here.com/public_mirror/python:3.10"
  script:
    - pip install -e .
    - pip install -r requirements_dev.txt
    - pytest
  #when: manual
